RPC_PRIMARY=https://api.mainnet-beta.solana.com
RPC_SECONDARY=

WS_PRIMARY=
WS_SECONDARY=

BOT_KEYPAIR_PATH=/path/to/keypair.json

LOG_LEVEL=info
NODE_ENV=development

KAMINO_MARKET_PUBKEY=7u3HeHxYDLhnCoErrtycNokbQYbWGzLs6JSDqGAv5PfF
KAMINO_KLEND_PROGRAM_ID=KLend2g3cP87fffoy8q1mQqGKjrxjC8boSyAYavgmjD

YELLOWSTONE_GRPC_URL=https://solana-mainnet.g.alchemy.com/
YELLOWSTONE_X_TOKEN=your-alchemy-token-here

# Optional: Allowlist mode - only score obligations touching these mints
# Comma-separated list of mint addresses (e.g., SOL and USDC for validation)
# ALLOWLIST_MINTS=So11111111111111111111111111111111111111112,EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v

# Oracle configuration (Scope chain selection and sanity checks)
# LIQSOL_ENABLE_SCOPE_SCAN: Enable full curated chain scanning for Scope oracles (default: disabled)
#   When disabled, Scope oracles only try configured chains + chain 0 fallback
#   When enabled (=1), scans curated list of common chains [0, 3, 13, 2, 4, 6]
#   Note: Small allowlist mode (<=5 mints) auto-enables bounded curated scan regardless of this flag
# LIQSOL_ENABLE_SCOPE_SCAN=1

# CLAMP_STABLECOINS: Enable stablecoin price clamping to [0.99, 1.01] range (default: disabled)
#   When enabled (=1), stablecoin prices outside the range are clamped during cache load
#   Stablecoin sanity checks always warn when prices are outside [0.95, 1.05] range
# CLAMP_STABLECOINS=1

# Snapshot timeout configuration (in seconds)
# Max timeout: Total time before giving up on snapshot (default: 180s)
# Inactivity timeout: Time without data before considering stream inactive (default: 30s)
SNAPSHOT_MAX_SECONDS=180
SNAPSHOT_INACTIVITY_SECONDS=30

# Indexer polling interval (in milliseconds)
INDEXER_INTERVAL_MS=5000

# PR 8.7: Forecast ranking for flashloan dry-run
# USE_FORECAST_FOR_DRYRUN: Enable/disable forecast-based candidate ranking (default: false)
# FORECAST_WEIGHT_EV: Weight for EV in composite scoring (default: 0.75) [optional]
# FORECAST_WEIGHT_TTL: Weight for TTL in composite scoring (default: 0.25) [optional]
USE_FORECAST_FOR_DRYRUN=false
FORECAST_WEIGHT_EV=0.75
FORECAST_WEIGHT_TTL=0.25

# PR10: Scheduler thresholds
SCHED_MIN_EV=0
SCHED_MAX_TTL_MIN=999999
SCHED_MIN_HAZARD=0
SCHED_MAX_QUEUE_SIZE=100
SCHED_MAX_PLANS_PER_CYCLE=100
SCHED_FORCE_INCLUDE_LIQUIDATABLE=true

# PR10+: Candidate selection tuning
# CAND_TOP: Maximum number of top candidates to select (default: 50)
# CAND_NEAR: Near-liquidation threshold (default: 1.02, i.e., health ratio <= 1.02 is "near")
# CAND_VALIDATE_SAMPLES: Number of candidates to validate with detailed breakdown (default: 0)
CAND_TOP=50
CAND_NEAR=1.02
CAND_VALIDATE_SAMPLES=0

# PR11: Forecast TTL management and EV-based refresh thresholds
FORECAST_MAX_AGE_MS=300000
SCHED_REFRESH_INTERVAL_MS=30000
SCHED_EV_DROP_PCT=0.15
SCHED_MIN_REFRESH_INTERVAL_MS=60000

# TTL expiry configuration
# TTL_GRACE_MS: Grace period (ms) after predicted liquidation time before marking as expired (default: 60000 = 60s)
# TTL_UNKNOWN_PASSES: Whether to allow plans with unknown TTL through eligibility filter (default: true)
TTL_GRACE_MS=60000
TTL_UNKNOWN_PASSES=true

# PR12: Scheduler batch limit for refresh queue
SCHED_REFRESH_BATCH_LIMIT=25

# Execution thresholds (PR13)
EXEC_MIN_EV=0
EXEC_MAX_TTL_MIN=999999
SCHEDULED_MIN_LIQUIDATION_DELAY_MS=0

# PR2: Executor configuration
EXEC_CU_LIMIT=600000
EXEC_CU_PRICE=0
JUPITER_SLIPPAGE_BPS=50

# Final PR: Jupiter swap sizing configuration
# SWAP_SLIPPAGE_BPS: Slippage tolerance for Jupiter swaps in basis points (default: 100 = 1%)
# SWAP_IN_HAIRCUT_BPS: Safety haircut applied to estimated seized collateral (default: 100 = 1%)
#   This prevents oversizing swaps if estimation is slightly off
# SWAP_SIZING_FALLBACK_ENABLED: Enable fallback to liquidation-only if swap sizing fails (default: true)
#   When true, bot proceeds with liquidation-only (no swap) if seized-delta estimation fails
#   When false, bot fails-fast and skips the plan entirely
SWAP_SLIPPAGE_BPS=100
SWAP_IN_HAIRCUT_BPS=100
SWAP_SIZING_FALLBACK_ENABLED=true

# Final PR: Presubmitter cache configuration
# PRESUBMIT_TOP_K: Number of top plans to prebuild and cache (default: 10)
# PRESUBMIT_REFRESH_MS: Minimum refresh interval per obligation in milliseconds (default: 3000)
# PRESUBMIT_TTL_MS: Maximum age of cached transactions in milliseconds (default: 60000)
PRESUBMIT_TOP_K=10
PRESUBMIT_REFRESH_MS=3000
PRESUBMIT_TTL_MS=60000

# Final PR: Compute unit and priority fee configuration for broadcast retries
# CU_LIMIT: Compute unit limit per transaction (default: 600000)
# CU_PRICE_MICROLAMPORTS: Priority fee in microlamports per CU (default: 0)
#   Set higher for faster execution during network congestion
CU_LIMIT=600000
CU_PRICE_MICROLAMPORTS=0

# PR2: Bot configuration
BOT_MAX_INFLIGHT=1
BOT_MAX_ATTEMPTS_PER_CYCLE=10
LIQSOL_BROADCAST=false

# Final PR: Broadcast retry configuration
# BOT_MAX_ATTEMPTS_PER_PLAN: Max send attempts per transaction (default: 2)
#   Retries happen on blockhash expired, compute exceeded, or priority issues
BOT_MAX_ATTEMPTS_PER_PLAN=2

# Scheduler main loop flags (PR14)
SCHEDULER_ENABLE_REFRESH=true
SCHEDULER_ENABLE_AUDIT=true
# SCHEDULER_ENABLE_DRYRUN: Controls whether executor runs at all (not the execution mode).
# Set to false to disable executor entirely. Use LIQSOL_BROADCAST to control dry-run vs broadcast mode.
# Note: This is a legacy flag name. The clearer name SCHEDULER_ENABLE_EXECUTOR is preferred but this
# name is maintained for backward compatibility. Default: true
SCHEDULER_ENABLE_DRYRUN=true
# SCHEDULER_ENABLE_EXECUTOR=true  # Preferred alternative to SCHEDULER_ENABLE_DRYRUN (takes precedence if set)
SCHEDULER_MAIN_INTERVAL_MS=30000

# PR14.1: Yellowstone gRPC and real-time refresh configuration
# YELLOWSTONE_GRPC_URL is already defined above
OBLIGATION_PUBKEYS=kgpZaovQNKALCNyxUFuoPj4kSqm6YQz5H4qXgM5p61d
PRICE_ASSET_MINTS=So11111111111111111111111111111111111111112,EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v

# Event significance thresholds and throttling
MIN_PRICE_PCT_CHANGE=1.0
MIN_HEALTH_DELTA=0.01
EVENT_MIN_REFRESH_INTERVAL_MS=3000

# Optional heartbeat audit interval (ms)
SCHED_HEARTBEAT_INTERVAL_MS=60000